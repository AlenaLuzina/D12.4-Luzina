INFO 2023-04-30 21:30:39,538 autoreload
INFO 2023-04-30 22:29:36,974 autoreload
INFO 2023-04-30 22:29:38,395 autoreload
2023-05-02 15:39:30,237 INFO autoreload Watching for file changes with StatReloader
2023-05-02 15:39:32,656 INFO basehttp "GET /news/news/add HTTP/1.1" 302 0
2023-05-02 15:39:32,803 INFO basehttp "GET /accounts/login/?next=/news/news/add HTTP/1.1" 200 3930
2023-05-02 15:39:32,926 WARNING log Not Found: /static/vendor/bootstrap/css/bootstrap.min.css
2023-05-02 15:39:32,926 WARNING log Not Found: /static/vendor/bootstrap/js/bootstrap.bundle.min.js
2023-05-02 15:39:32,926 WARNING log Not Found: /static/css/styles.css
2023-05-02 15:39:32,926 WARNING log Not Found: /static/vendor/jquery/jquery.slim.min.js
2023-05-02 15:39:32,926 WARNING basehttp "GET /static/vendor/bootstrap/js/bootstrap.bundle.min.js HTTP/1.1" 404 179
2023-05-02 15:39:32,926 WARNING basehttp "GET /static/vendor/bootstrap/css/bootstrap.min.css HTTP/1.1" 404 179
2023-05-02 15:39:32,926 WARNING basehttp "GET /static/css/styles.css HTTP/1.1" 404 179
2023-05-02 15:39:32,926 WARNING basehttp "GET /static/vendor/jquery/jquery.slim.min.js HTTP/1.1" 404 179
2023-05-02 15:39:32,957 WARNING log Not Found: /static/vendor/bootstrap/js/bootstrap.bundle.min.js
2023-05-02 15:39:32,957 WARNING basehttp "GET /static/vendor/bootstrap/js/bootstrap.bundle.min.js HTTP/1.1" 404 179
2023-05-02 15:39:46,409 WARNING log Not Found: /favicon.ico
2023-05-02 15:39:46,409 INFO basehttp - Broken pipe from ('127.0.0.1', 57947)
2023-05-02 15:40:02,732 INFO basehttp "GET /admin/ HTTP/1.1" 302 0
2023-05-02 15:40:02,826 INFO basehttp "GET /admin/login/?next=/admin/ HTTP/1.1" 200 4181
2023-05-02 15:40:02,933 WARNING log Not Found: /static/admin/css/base.css
2023-05-02 15:40:02,933 WARNING log Not Found: /static/admin/css/nav_sidebar.css
2023-05-02 15:40:02,933 WARNING basehttp "GET /static/admin/css/base.css HTTP/1.1" 404 179
2023-05-02 15:40:02,933 WARNING log Not Found: /static/admin/css/dark_mode.css
2023-05-02 15:40:02,948 WARNING basehttp "GET /static/admin/css/nav_sidebar.css HTTP/1.1" 404 179
2023-05-02 15:40:02,948 WARNING log Not Found: /static/admin/css/responsive.css
2023-05-02 15:40:02,948 WARNING log Not Found: /static/admin/css/login.css
2023-05-02 15:40:02,948 WARNING basehttp "GET /static/admin/css/dark_mode.css HTTP/1.1" 404 179
2023-05-02 15:40:02,948 WARNING basehttp "GET /static/admin/css/responsive.css HTTP/1.1" 404 179
2023-05-02 15:40:02,948 WARNING basehttp "GET /static/admin/css/login.css HTTP/1.1" 404 179
2023-05-02 15:40:02,948 WARNING log Not Found: /static/admin/js/nav_sidebar.js
2023-05-02 15:40:02,948 WARNING log Not Found: /static/admin/js/theme.js
2023-05-02 15:40:02,948 WARNING basehttp "GET /static/admin/js/nav_sidebar.js HTTP/1.1" 404 179
2023-05-02 15:40:02,948 WARNING basehttp "GET /static/admin/js/theme.js HTTP/1.1" 404 179
2023-05-02 15:41:08,986 INFO basehttp "POST /admin/login/?next=/admin/ HTTP/1.1" 302 0
2023-05-02 15:41:09,048 INFO basehttp "GET /admin/ HTTP/1.1" 200 15581
2023-05-02 15:41:09,186 WARNING log Not Found: /static/admin/css/dark_mode.css
2023-05-02 15:41:09,186 WARNING log Not Found: /static/admin/js/nav_sidebar.js
2023-05-02 15:41:09,186 WARNING log Not Found: /static/admin/css/base.css
2023-05-02 15:41:09,186 WARNING log Not Found: /static/admin/css/nav_sidebar.css
2023-05-02 15:41:09,186 WARNING log Not Found: /static/admin/css/responsive.css
2023-05-02 15:41:09,186 WARNING log Not Found: /static/admin/js/theme.js
2023-05-02 15:41:09,186 WARNING basehttp "GET /static/admin/css/dark_mode.css HTTP/1.1" 404 179
2023-05-02 15:41:09,186 WARNING basehttp "GET /static/admin/js/nav_sidebar.js HTTP/1.1" 404 179
2023-05-02 15:41:09,186 WARNING basehttp "GET /static/admin/css/nav_sidebar.css HTTP/1.1" 404 179
2023-05-02 15:41:09,186 WARNING basehttp "GET /static/admin/css/base.css HTTP/1.1" 404 179
2023-05-02 15:41:09,202 WARNING basehttp "GET /static/admin/css/responsive.css HTTP/1.1" 404 179
2023-05-02 15:41:09,202 WARNING basehttp "GET /static/admin/js/theme.js HTTP/1.1" 404 179
2023-05-02 15:41:09,202 WARNING log Not Found: /static/admin/css/dashboard.css
2023-05-02 15:41:09,202 WARNING basehttp "GET /static/admin/css/dashboard.css HTTP/1.1" 404 179
2023-05-02 15:41:20,954 INFO basehttp "GET /admin/ HTTP/1.1" 200 15581
2023-05-02 15:41:21,039 WARNING log Not Found: /static/admin/css/dark_mode.css
2023-05-02 15:41:21,039 WARNING log Not Found: /static/admin/js/theme.js
2023-05-02 15:41:21,039 WARNING log Not Found: /static/admin/js/nav_sidebar.js
2023-05-02 15:41:21,039 WARNING log Not Found: /static/admin/css/dashboard.css
2023-05-02 15:41:21,039 WARNING basehttp "GET /static/admin/js/theme.js HTTP/1.1" 404 179
2023-05-02 15:41:21,039 WARNING log Not Found: /static/admin/css/base.css
2023-05-02 15:41:21,039 WARNING basehttp "GET /static/admin/css/dark_mode.css HTTP/1.1" 404 179
2023-05-02 15:41:21,039 WARNING basehttp "GET /static/admin/js/nav_sidebar.js HTTP/1.1" 404 179
2023-05-02 15:41:21,054 WARNING basehttp "GET /static/admin/css/dashboard.css HTTP/1.1" 404 179
2023-05-02 15:41:21,054 WARNING basehttp "GET /static/admin/css/base.css HTTP/1.1" 404 179
2023-05-02 15:41:21,054 WARNING log Not Found: /static/admin/css/nav_sidebar.css
2023-05-02 15:41:21,054 WARNING basehttp "GET /static/admin/css/nav_sidebar.css HTTP/1.1" 404 179
2023-05-02 15:41:21,054 WARNING log Not Found: /static/admin/css/responsive.css
2023-05-02 15:41:21,054 WARNING basehttp "GET /static/admin/css/responsive.css HTTP/1.1" 404 179
2023-05-02 15:41:36,312 INFO basehttp "GET / HTTP/1.1" 200 5969
2023-05-02 15:41:36,406 WARNING log Not Found: /static/vendor/jquery/jquery.slim.min.js
2023-05-02 15:41:36,412 WARNING log Not Found: /static/vendor/bootstrap/js/bootstrap.bundle.min.js
2023-05-02 15:41:36,412 WARNING log Not Found: /static/vendor/bootstrap/css/bootstrap.min.css
2023-05-02 15:41:36,412 WARNING log Not Found: /static/css/styles.css
2023-05-02 15:41:36,412 WARNING basehttp "GET /static/vendor/jquery/jquery.slim.min.js HTTP/1.1" 404 179
2023-05-02 15:41:36,412 WARNING basehttp "GET /static/vendor/bootstrap/js/bootstrap.bundle.min.js HTTP/1.1" 404 179
2023-05-02 15:41:36,412 WARNING basehttp "GET /static/vendor/bootstrap/css/bootstrap.min.css HTTP/1.1" 404 179
2023-05-02 15:41:36,412 WARNING basehttp "GET /static/css/styles.css HTTP/1.1" 404 179
2023-05-02 15:41:36,428 WARNING log Not Found: /static/vendor/bootstrap/js/bootstrap.bundle.min.js
2023-05-02 15:41:36,428 WARNING basehttp "GET /static/vendor/bootstrap/js/bootstrap.bundle.min.js HTTP/1.1" 404 179
2023-05-02 15:44:58,729 INFO autoreload Watching for file changes with StatReloader
2023-05-02 15:45:10,452 INFO basehttp "GET / HTTP/1.1" 200 5969
2023-05-02 15:45:10,537 WARNING log Not Found: /static/vendor/bootstrap/css/bootstrap.min.css
2023-05-02 15:45:10,537 WARNING log Not Found: /static/vendor/jquery/jquery.slim.min.js
2023-05-02 15:45:10,537 WARNING log Not Found: /static/css/styles.css
2023-05-02 15:45:10,537 WARNING basehttp "GET /static/vendor/bootstrap/css/bootstrap.min.css HTTP/1.1" 404 179
2023-05-02 15:45:10,537 WARNING basehttp "GET /static/vendor/jquery/jquery.slim.min.js HTTP/1.1" 404 179
2023-05-02 15:45:10,537 WARNING basehttp "GET /static/css/styles.css HTTP/1.1" 404 179
2023-05-02 15:45:10,553 WARNING log Not Found: /static/vendor/bootstrap/js/bootstrap.bundle.min.js
2023-05-02 15:45:10,553 WARNING basehttp "GET /static/vendor/bootstrap/js/bootstrap.bundle.min.js HTTP/1.1" 404 179
2023-05-02 15:45:34,661 INFO basehttp "GET /news/news/add HTTP/1.1" 200 3391
2023-05-02 15:45:34,777 WARNING log Not Found: /static/vendor/jquery/jquery.slim.min.js
2023-05-02 15:45:34,777 WARNING log Not Found: /static/vendor/bootstrap/css/bootstrap.min.css
2023-05-02 15:45:34,777 WARNING basehttp "GET /static/vendor/jquery/jquery.slim.min.js HTTP/1.1" 404 179
2023-05-02 15:45:34,777 WARNING log Not Found: /static/vendor/bootstrap/js/bootstrap.bundle.min.js
2023-05-02 15:45:34,777 WARNING basehttp "GET /static/vendor/bootstrap/css/bootstrap.min.css HTTP/1.1" 404 179
2023-05-02 15:45:34,777 WARNING basehttp "GET /static/vendor/bootstrap/js/bootstrap.bundle.min.js HTTP/1.1" 404 179
2023-05-02 15:45:34,793 WARNING log Not Found: /static/css/styles.css
2023-05-02 15:45:34,793 WARNING basehttp "GET /static/css/styles.css HTTP/1.1" 404 179
2023-05-02 15:45:53,235 ERROR log Internal Server Error: /news/news/add
Traceback (most recent call last):
  File "C:\Users\User\Documents\Python-îáó÷åíèå\NewsPaper\venv\lib\site-packages\django\utils\datastructures.py", line 84, in __getitem__
    list_ = super().__getitem__(key)
KeyError: 'category'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\User\Documents\Python-îáó÷åíèå\NewsPaper\venv\lib\site-packages\django\core\handlers\exception.py", line 55, in inner
    response = get_response(request)
  File "C:\Users\User\Documents\Python-îáó÷åíèå\NewsPaper\venv\lib\site-packages\django\core\handlers\base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "C:\Users\User\Documents\Python-îáó÷åíèå\NewsPaper\venv\lib\site-packages\django\views\generic\base.py", line 104, in view
    return self.dispatch(request, *args, **kwargs)
  File "C:\Users\User\Documents\Python-îáó÷åíèå\NewsPaper\venv\lib\site-packages\django\contrib\auth\mixins.py", line 109, in dispatch
    return super().dispatch(request, *args, **kwargs)
  File "C:\Users\User\Documents\Python-îáó÷åíèå\NewsPaper\venv\lib\site-packages\django\views\generic\base.py", line 143, in dispatch
    return handler(request, *args, **kwargs)
  File "C:\Users\User\Documents\Python-îáó÷åíèå\NewsPaper\venv\NewsPaper\news\views.py", line 99, in post
    category_id = request.POST['category']
  File "C:\Users\User\Documents\Python-îáó÷åíèå\NewsPaper\venv\lib\site-packages\django\utils\datastructures.py", line 86, in __getitem__
    raise MultiValueDictKeyError(key)
django.utils.datastructures.MultiValueDictKeyError: 'category'
2023-05-02 15:45:53,474 ERROR basehttp "POST /news/news/add HTTP/1.1" 500 145
2023-05-02 15:46:26,222 INFO autoreload C:\Users\User\Documents\Python-îáó÷åíèå\NewsPaper\venv\NewsPaper\NewsPaper\settings.py changed, reloading.
2023-05-02 20:20:30,329 INFO autoreload Watching for file changes with StatReloader
2023-05-02 20:21:56,952 INFO autoreload C:\Users\User\Documents\Python-îáó÷åíèå\NewsPaper\venv\NewsPaper\NewsPaper\settings.py changed, reloading.
2023-05-02 20:21:58,205 INFO autoreload Watching for file changes with StatReloader
2023-05-02 20:24:17,731 INFO autoreload C:\Users\User\Documents\Python-îáó÷åíèå\NewsPaper\venv\NewsPaper\NewsPaper\settings.py changed, reloading.
2023-05-02 20:24:19,162 INFO autoreload Watching for file changes with StatReloader
2023-05-02 20:30:38,454 INFO autoreload C:\Users\User\Documents\Python-îáó÷åíèå\NewsPaper\venv\NewsPaper\NewsPaper\settings.py changed, reloading.
2023-05-02 20:30:39,650 INFO autoreload Watching for file changes with StatReloader
2023-05-02 20:31:50,640 INFO autoreload C:\Users\User\Documents\Python-îáó÷åíèå\NewsPaper\venv\NewsPaper\NewsPaper\settings.py changed, reloading.
2023-05-02 20:31:51,928 INFO autoreload Watching for file changes with StatReloader
[02/May/2023 20:32:22] "GET /news/ HTTP/1.1" 200 5969
[02/May/2023 20:32:44] "GET /news/news/add HTTP/1.1" 200 3399
2023-05-02 20:34:46,178 INFO autoreload Watching for file changes with StatReloader
[02/May/2023 20:34:52] "GET /accounts/logout/ HTTP/1.1" 200 2774
[02/May/2023 20:34:54] "POST /accounts/logout/ HTTP/1.1" 302 0
[02/May/2023 20:34:54] "GET / HTTP/1.1" 200 5966
[02/May/2023 20:35:15] "GET /admin/ HTTP/1.1" 302 0
[02/May/2023 20:35:15] "GET /admin/login/?next=/admin/ HTTP/1.1" 200 4307
[02/May/2023 20:36:12] "POST /admin/login/?next=/admin/ HTTP/1.1" 302 0
[02/May/2023 20:36:12] "GET /admin/ HTTP/1.1" 200 15581
[02/May/2023 20:36:27] "GET / HTTP/1.1" 200 5969
[02/May/2023 20:36:38] "GET /news/news/add HTTP/1.1" 200 3399
2023-05-02 20:40:39,237 INFO autoreload C:\Users\User\Documents\Python-îáó÷åíèå\NewsPaper\venv\NewsPaper\NewsPaper\settings.py changed, reloading.
2023-05-02 20:40:40,619 INFO autoreload Watching for file changes with StatReloader>>> from news.models import *

# Создать двух пользователей (с помощью метода User.objects.create_user).
>>> User.objects.create_user(username='Mary')
<User: Mary>
>>> User.objects.create_user(username='Lily')
<User: Lily>
>>> User.objects.create_user(username='Harry')
<User: Harry>
>>> User.objects.create_user(username='SmallEvil')
<User: SmallEvil>
>>> User.objects.all().values('id', 'username')
<QuerySet [{'id': 4, 'username': 'Harry'}, {'id': 3, 'username': 'Lily'}, {'id': 2, 'username': 'Mary'}, {'id': 5, 'username': 'SmallEvil'}, {'id': 1, 'username': 'a
dmin'}]>

# Создать два объекта модели Author, связанные с пользователями.
>>> au = User.objects.get(id=2)
>>> Author.objects.create(author=au)
<Author: Author object (1)>
>>> Author.objects.create(author=User.objects.get(id=5))
<Author: Author object (2)>
>>> Author.objects.all().values()
<QuerySet [{'id': 1, 'author_id': 2, 'author_rating': 0}, {'id': 2, 'author_id': 5, 'author_rating': 0}]>

# Добавить 4 категории в модель Category.
>>> Category.objects.create(category_name='Horror')
<Category: Category object (1)>
>>> Category.objects.create(category_name='Drama')
<Category: Category object (2)>
>>> Category.objects.create(category_name='Comedy')
<Category: Category object (3)>
>>> Category.objects.create(category_name='Poetry')
<Category: Category object (4)>
>>> Category.objects.all().values()
<QuerySet [{'id': 1, 'category_name': 'Horror'}, {'id': 2, 'category_name': 'Drama'}, {'id': 3, 'category_name': 'Comedy'}, {'id': 4, 'category_name': 'Poetry'}]>

# Добавить 2 статьи и 1 новость.
>>> Post.objects.create(post_author=Author.objects.get(id=1), news_title='Good news', news_text='Good news text', news_type_choice='nw')
<Post: Post object (1)>
>>> Post.objects.create(post_author=Author.objects.get(id=2), news_title='Bad story for bad cats', news_text='Bad story text', news_type_choice='ar')
<Post: Post object (2)>
>>> Post.objects.create(post_author=Author.objects.get(author_id=5), news_title='Another bad story for cats', news_text='Another bad story text', news_type_choice='a
r')
<Post: Post object (3)>

# Присвоить им категории (как минимум в одной статье/новости должно быть не меньше 2 категорий).
>>> Post.objects.get(id=1).category.add(Category.objects.get(id=3), Category.objects.get(id=4))
>>> Post.objects.get(id=2).category.add(Category.objects.get(id=1), Category.objects.get(id=2))
>>> Post.objects.get(id=3).category.add(Category.objects.get(id=1), Category.objects.get(id=2), Category.objects.get(id=3))

# Создать как минимум 4 комментария к разным объектам модели Post (в каждом объекте должен быть как минимум один комментарий).
>>> Comment.objects.create(comment_post_connect=Post.objects.get(id=1), comment_user_connect=User.objects.get(id=5), comment_text='too sweet')
<Comment: Comment object (1)>
>>> Comment.objects.create(comment_post_connect=Post.objects.get(id=1), comment_user_connect=User.objects.get(id=1), comment_text="don't be so evil")
<Comment: Comment object (2)>
Comment.objects.create(comment_post_connect=Post.objects.get(id=2), comment_user_connect=User.objects.get(id=3), comment_text="scared")
<Comment: Comment object (3)>
Comment.objects.create(comment_post_connect=Post.objects.get(id=2), comment_user_connect=User.objects.get(id=4), comment_text="love it")
<Comment: Comment object (4)>
>>> Comment.objects.create(comment_post_connect=Post.objects.get(id=3), comment_user_connect=User.objects.get(id=4), comment_text="you're fantastic")
<Comment: Comment object (5)>

# Применяя функции like() и dislike() к статьям/новостям и комментариям, скорректировать рейтинги этих объектов.
>>> Post.objects.get(id=1).dislike()
>>> Post.objects.get(id=1).dislike()
>>> Post.objects.get(id=1).like()
>>> Post.objects.get(id=2).like()
>>> Post.objects.get(id=2).like()
>>> Post.objects.get(id=2).like()
>>> Post.objects.get(id=2).like()
>>> Post.objects.get(id=3).like()
>>> Post.objects.get(id=3).like()
>>> Comment.objects.get(id=1).dislike()
>>> Comment.objects.get(id=1).dislike()
>>> Comment.objects.get(id=1).dislike()
>>> Comment.objects.get(id=2).like()
>>> Comment.objects.get(id=3).dislike()
>>> Comment.objects.get(id=4).like()
>>> Comment.objects.get(id=4).like()
>>> Comment.objects.get(id=5).like()

# Обновить рейтинги пользователей.
>>> for _ in Author.objects.all(): _.update_rating()
...
>>> Author.objects.all().values()
<QuerySet [{'id': 1, 'author_id': 2, 'author_rating': -5}, {'id': 2, 'author_id': 5, 'author_rating': 17}]>

# Вывести username и рейтинг лучшего пользователя (применяя сортировку и возвращая поля первого объекта).
>>> Author.objects.order_by('-author_rating')[:1].values('author__username', 'author_rating')
<QuerySet [{'author__username': 'SmallEvil', 'author_rating': 17}]>

# Вывести дату добавления, username автора, рейтинг, заголовок и превью лучшей статьи, основываясь на лайках/дислайках к этой статье.
>>> for _ in Post.objects.order_by('-news_rating')[:1]: Post.objects.order_by('-news_rating')[:1].values('create_time__date', 'post_author__author__username', 'news_
rating', 'news_title'), _.preview()
...
(<QuerySet [{'create_time__date': datetime.date(2023, 4, 8), 'post_author__author__username': 'SmallEvil', 'news_rating': 4, 'news_title': 'Bad story for bad cats'}]
>, 'Bad story text...')

# Вывести все комментарии (дата, пользователь, рейтинг, текст) к этой статье.
>>> Comment.objects.filter(comment_post_connect=Post.objects.order_by('-news_rating')[:1]).values('comment_create_date__date', 'comment_user_connect__username','comm
ent_rating', 'comment_text')
<QuerySet [{'comment_create_date__date': datetime.date(2023, 4, 9), 'comment_user_connect__username': 'Lily', 'comment_rating': -1, 'comment_text': 'scared'}, {'comm
ent_create_date__date': datetime.date(2023, 4, 9), 'comment_user_connect__username': 'Harry', 'comment_rating': 2, 'comment_text': 'love it'}]>

>>> Category.objects.get(id=1).subscribers.get(username='Lily').email
'larsy-c@yandex.ru'

>>> Post.objects.all().filter(post_author_id=1).filter(create_time__date='2023-4-8').values()
<QuerySet [{'id': 1, 'post_author_id': 1, 'news_title': 'Good news', 'news_text': 'Good news text', 'news_rating': -1, 'create_time': datetime.datetime(
2023, 4, 8, 21, 45, 34, 849764, tzinfo=datetime.timezone.utc), 'news_type_choice': 'nw'}]>

>>> Post.objects.all().filter(post_author_id=1).filter(create_time__date=datetime.today())
<QuerySet []>